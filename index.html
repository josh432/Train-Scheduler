<!DOCTYPE html>
<html lang="en-us">
<head>
	
	<title>Train Scheduler</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<META NAME="Author" CONTENT="Joshua Silverman">
	<META NAME="Designer" CONTENT="Joshua Silverman">
	<META NAME="Game" CONTENT="Train Scheduler">
	<META NAME="Language" CONTENT="English">
	<META NAME="distribution" CONTENT="Local">
	<META NAME="Robots" CONTENT="INDEX,FOLLOW">
	<META NAME="zipcode" CONTENT="94523">
	<META NAME="city" CONTENT="Pleasant Hill">
	<META NAME="country" CONTENT="USA">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" type="text/css" href="./assets/style.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="https://fonts.googleapis.com/css?family=Lora" rel="stylesheet">
	<!--Firebase-->


</head>
<body>

	<div class="container">
		<div class="jumbotron">
			<h1 class="h1 text-center">California Train Scheduler</h1>
		</div>

		<div class="row">
			<div class="container col-md-12">
				<div class="panel panel-primary">
					<div class="panel-heading">Current Train Schedule</div>
				<div class="table-responsive">	
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Train Name</th>
							<th>Destination</th>
							<th>Frequency(min)</th>
							<th>Next Arrival</th>
							<th>Minutes Away</th>
						
						</tr>
					</thead>

					<tbody id="table-body">
						 	<tr>
                                <!-- Train Name -->
                               
                            </tr>

                            <tr>
                                <!-- Destination-->
                               
                            </tr>


							<tr>
                             <!-- Frequency (min) -->
                              
                            </tr>

							<tr>
                            <!-- Next Arrival-->
                            	
                            </tr>



					</tbody>
				</table>
			</div>
			</div>
		</div>	
	</div>
	<!--Add Train Form-->
	<div class="row">
		
			<div class="container col-md-12">
				<div class="panel panel-primary">
					<div class="panel-heading">Add Train</div>
					<form role="form">
                        <div class="input-group input-group-lg">
  						<span class="input-group-addon" >Train Name</span>
  						<input type="text" id="train-name" class="form-control" placeholder="Add a train" aria-describedby="sizing-addon1">
						</div>

                        <div class="input-group input-group-lg">
  						<span class="input-group-addon" >Destination</span>
  						<input type="text" id="destination" class="form-control" placeholder="Add a destination" aria-describedby="sizing-addon1">
						</div>

                        <div class="input-group input-group-lg">
  						<span class="input-group-addon" >Time(24hour)</span>
  						<input type="number" id="first-train" class="form-control" placeholder="Add a time" aria-describedby="sizing-addon1">
						</div>

                          <div class="input-group input-group-lg">
  						<span class="input-group-addon" >Frequency(min)</span>
  						<input type="number" id="frequency" class="form-control" placeholder="Add Frequency" aria-describedby="sizing-addon1">
						</div>

                        <button class="btn btn-primary" id="add-train" type="submit">Submit</button>
                    </form>
                 </div>   
			</div>	
		</div>
	</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/4.8.0/firebase.js"></script>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCBTKKXiQLp-Jz2cE3q2A2zSHuRrrIkbr4",
    authDomain: "trainscheduler-36a95.firebaseapp.com",
    databaseURL: "https://trainscheduler-36a95.firebaseio.com",
    projectId: "trainscheduler-36a95",
    storageBucket: "trainscheduler-36a95.appspot.com",
    messagingSenderId: "858336555618"
  };

  firebase.initializeApp(config);

var database = firebase.database();

var trainName = "";
var destinationCity = "";
var firstTrain = "";
var timedFrequency = "";
var minutesAway = "";

$('#add-train').on("click", function(){
	event.preventDefault();

	trainName = $('#train-name').val().trim();
	destinationCity = $('#destination').val().trim();
	firstTrain = $('#first-train').val().trim();
	timedFrequency = $('#frequency').val().trim();

	 var trainData = {
        name: trainName,
        destination: destinationCity,
        time: firstTrain,
        frequency: timedFrequency
      };

     database.ref().push(trainData);

     console.log(trainData.name);
     console.log(trainData.destination);
     console.log(trainData.time);
     console.log(trainData.frequency);

     $('#train-name').val('');
     $('#destination').val('');
     $('#first-train').val('');
     $('#frequency').val('');
});

database.ref().on("child_added", function(childSnapshot) {

 	  console.log(childSnapshot.val().name);
      console.log(childSnapshot.val().destination);
      console.log(childSnapshot.val().time);
      console.log(childSnapshot.val().frequency);


      var row = $('<tr></tr>').appendTo('#table-body');
      $('<td></td>').appendTo(row).text(childSnapshot.val().name);
      $('<td></td>').appendTo(row).text(childSnapshot.val().destination);
      $('<td></td>').appendTo(row).text(childSnapshot.val().time);
      $('<td></td>').appendTo(row).text(childSnapshot.val().frequency);





});












</script>

</body>
</html>